<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Set Up 'Travis' for Testing and Deployment • travis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Set Up 'Travis' for Testing and Deployment">
<meta property="og:description" content="Tools for interacting with the 'Travis' and
    'GitHub' APIs for setting up continuous integration for R packages and
    other R-based projects.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">travis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.11.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/travis.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropenscilabs/travis">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="travis" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#travis" class="anchor"></a>travis</h1></div>

<p>The goal of travis is to simplify the setup of continuous integration with <a href="https://travis-ci.org/">Travis CI</a>. Its main purpose is to provide a command-line way in R for certain Travis tasks that are usually done in the browser (build checking, cache deletion, build restarts, etc.).</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install travis from github with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"ropenscilabs/travis"</span>)</a></code></pre></div>
</div>
<div id="permissions" class="section level2">
<h2 class="hasAnchor">
<a href="#permissions" class="anchor"></a>Permissions</h2>
<p>The package is linked to the “rtravis” application, and will request GitHub permissions to carry out its actions. Revoking these permissions also invalidates any SSH keys created by this package.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<ol>
<li>
<p>Create a repository on GitHub (if it’s not there yet)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="reference/github_create_repo.html">github_create_repo</a></span>()</a></code></pre></div>
</li>
<li>
<p>Show the GitHub repository name</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="reference/github_info.html">github_repo</a></span>()</a></code></pre></div>
</li>
<li>
<p>Turn on Travis for this repo (syncs from GitHub if necessary!)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="reference/travis_enable.html">travis_enable</a></span>()</a></code></pre></div>
</li>
<li><p>Browse the repo on Travis</p></li>
</ol>
<p>Check the <a href="travis.html">Getting Started</a> vignette for examples.</p>
<ol>
<li><p>Set up push access for Travis: This creates an SSH key, stores it as encoded encrypted environment variable on Travis, and enables push access for the corresponding public key. GitHub notifies you via e-mail.</p></li>
<li>
<p>Query current state of the repo on Travis.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="reference/travis_get_builds.html">travis_get_builds</a></span>()</a></code></pre></div>
<pre><code>A collection of 25 Travis CI builds:
- id: 430482536, number: 415, state: started, duration: NULL, event_type: pull_request, ...
- id: 430482493, number: 414, state: failed, duration: 2886, event_type: push, ...
- id: 430453895, number: 413, state: failed, duration: 3028, event_type: pull_request, ...
- id: 430453887, number: 412, state: failed, duration: 3251, event_type: push, ...
- id: 430442750, number: 411, state: failed, duration: 2716, event_type: pull_request, ...
- ...</code></pre>
</li>
<li>
<p>Retrieve cache information</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/travis_get_caches.html">travis_get_caches</a></span>()</a></code></pre></div>
<pre><code>A collection of 56 Travis CI caches:
- repository_id: 10785882, size: 68080246, name: cache-linux-trusty-
  118a1ba90e288592bc83914310d60771d319c6a1e959176fb3aadede7b9782cb--R-3.5.0.tgz, 
  branch: PR.64, last_modified: 2018-09-13T22:29:55Z, 
  repo: list(`@type` = "repository", `@href` = "/repo/10785882", 
  `@representation` = "minimal", id = 10785882, name = "tic", slug = "ropenscilabs/tic")

- repository_id: 10785882, size: 60603887, name: cache-linux-trusty-
  e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855--R-3.1.3.tgz, 
  branch: PR.64, last_modified: 2018-09-13T22:27:07Z, 
  repo: list(`@type` = "repository", `@href` = "/repo/10785882", 
  `@representation` = "minimal", id = 10785882, name = "tic", slug = "ropenscilabs/tic")
  [...]</code></pre>
</li>
<li>
<p>Clear all caches (caution, currently its only possible to delete all caches!):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="reference/travis_get_caches.html">travis_delete_caches</a></span>()</a></code></pre></div>
<pre><code>Finished deleting caches for &lt;repo&gt; on Travis CI.</code></pre>
</li>
<li>
<p>Create a Personal Access Token (PAT) to avoid Github’s rate limit</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/travis_set_pat.html">travis_set_pat</a></span>()</a></code></pre></div>
<pre><code>Create a personal access token, make sure that you are signed in as the correct user. 
The suggested description 'travis+tic for &lt;repo&gt;' has been copied to the clipboard. 
If you use this token only to avoid GitHubts rate limit, you can leave all scopes unchecked.
Then, copy the new token to the clipboard, it will be detected and applied automatically. 
Please visit https://github.com/settings/tokens/new. A browser window will be opened. 
Waiting for PAT to appear on the clipboard. Detected PAT, clearing clipboard. 
Finished adding private environment variable GITHUB_PAT to &lt;repo&gt; on Travis CI.</code></pre>
</li>
<li>
<p>Set or update environment variables on Travis. Caution: The secret value passed to this function is captured in the history.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="reference/travis_get_vars.html">travis_set_var</a></span>()</a></code></pre></div>
<pre><code>Finished adding private environment variable variable to &lt;repo&gt; on Travis CI.</code></pre>
</li>
<li>
<p>Fetch the complete log of a specific build</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="reference/travis_get_builds.html">travis_get_log</a></span>(<span class="st">"454188046"</span>)</a></code></pre></div>
<pre><code>Setting up libatomic1:amd64 (4.8.4-2ubuntu1~14.04.4) ...
Setting up libitm1:amd64 (4.8.4-2ubuntu1~14.04.4) ...
Setting up libgomp1:amd64 (4.8.4-2ubuntu1~14.04.4) ...
Setting up libasan0:amd64 (4.8.4-2ubuntu1~14.04.4) ...
[...]</code></pre>
</li>
</ol>
</div>
<div id="tic-integration" class="section level2">
<h2 class="hasAnchor">
<a href="#tic-integration" class="anchor"></a><em>tic</em> integration</h2>
<p>Apart from automating away a few button flips, it also provides an easy method to set up push access which can be then triggered (on Travis) by the companion package <a href="https://github.com/ropenscilabs/tic">tic</a> via the <code><a href="reference/use_tic.html">use_tic()</a></code> function, which performs the following steps:</p>
<ol>
<li>If necessary, creates a GitHub repository</li>
<li>Enables Travis CI for this repository</li>
<li>Creates a default <code>.travis.yml</code> file</li>
<li>Creates a default <code>appveyor.yml</code> file</li>
<li>Creates a default <code>tic.R</code> file depending on the repo type (package, website, bookdown, …)</li>
<li>Enables deployment to GitHub (if necessary, depending on repo type)</li>
<li>Helps the user create a GitHub PAT, and installs it on Travis CI</li>
</ol>
<p>Fine-grained control is available through more specialized functions, see the examples below.</p>
<hr>
<p><a href="https://ropensci.org"><img src="https://ropensci.org/public_images/ropensci_footer.png" alt="ropensci_footer"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ropenscilabs/travis">https://​github.com/​ropenscilabs/​travis</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropenscilabs/travis/issues">https://​github.com/​ropenscilabs/​travis/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://krlmlr.info">Kirill Müller</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1416-3412" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>Mika Braginsky <br><small class="roles"> Author </small>  </li>
<li>Karthik Ram <br><small class="roles"> Author </small>  </li>
<li>Jeroen Ooms <br><small class="roles"> Author </small>  </li>
<li>rOpenSci <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ropenscilabs/travis"><img src="https://travis-ci.org/ropenscilabs/travis.svg?branch=master" alt="Travis-CI Build Status"></a></li>
</ul>
</div>
</div>
</div>

      <footer><div class="copyright">
  <p>Developed by <a href="http://krlmlr.info">Kirill Müller</a>, Mika Braginsky, Karthik Ram, Jeroen Ooms, rOpenSci.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
